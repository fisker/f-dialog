/*! fu-dialog v1.0.10 | (c) 2019 fisker | MIT */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.fd=b())})(this,function(){'use strict';function a(a){var b=a.Promise,c=a.dialogPolyfill;b&&(F.Promise=b),c&&(F.dialogPolyfill=c)}function b(a){for(var b in this)J.call(this,b)&&a.call(this,this[b],b,this)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function e(a,b,c){return b&&d(a.prototype,b),c&&d(a,c),a}function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(a){return ba.call(a).slice(8,-1)}function h(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b="";return b=da(a)?a:((a||"")+"").split(" "),b}function i(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(da(a)||"string"==typeof a)&&(a={className:a});var b=h(a.className);return b.length?a.className=b.join(" "):delete a.className,!ga&&"textContent"in a&&(a.innerText=a.textContent,delete a.textContent),a}function j(a,b){var c=ha[b];return c&&(a=L({},c,a)),a}function k(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};"string"==typeof a&&(c=b,b=a,a=null);var d=M.createElement(b);return c=i(c),c=j(c,b),L(d,c),a&&a.appendChild(d),d}function l(a){return"number"==typeof a&&-1<a&&0==a%1&&a<=9007199254740991}function m(a){return a&&"function"!=typeof a&&l(a.length)}function n(a){return a&&"number"==typeof a.nodeType}function o(a,b){return"string"==typeof b?(a.innerHTML=b,a):n(b)?(a.appendChild(b),a):m(b)?(I.call(b,function(b){o(a,b)}),a):a}function p(a){return"function"==typeof a||"boolean"==typeof a}function q(a){return!0===a&&(a=ja),!1===a&&(a=ia),a}function r(a,b,c){var d=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];return p(b)&&(d=c||!1,c=b,b="click"),c=q(c),a.addEventListener(b,c,d),a}function s(a){return a.preventDefault(),!1}function t(a,b){return r(a,b,s)}function u(a,b){return 2===arguments.length&&(a=f({},a,b)),L(ka,a)}function v(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ka,c=g(a);return"Object"!==c&&(a={message:a}),a=L(b,a),a}function w(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:la;"function"==typeof b&&(c=b,b={}),!1===c&&(c=ia),!0===c&&(c=ja),b=L({textContent:a+""},b);var d=h(b.className);d.unshift("fu-dialog__action"),b.className=d;var e=k("button",b);return{el:e,action:c}}function x(a){var b="";return"confirm"===a?b="fu-dialog__action--confirm":"cancel"==a&&(b="fu-dialog__action--cancel"),function(c,d){var e=ka["".concat(a,"ActionText")];return"function"==typeof c&&(d=c,c=e),c=c||e,w(c,{className:b},d)}}function y(a){return("string"==typeof a&&(a={text:a}),m(a))?y(a[0]):(n(a)&&(a={el:a}),"function"==typeof a.el&&(a.el=a.el()),(a===ma||a===na)&&(a=a()),("function"==typeof a||"boolean"==typeof a)&&(a=ma(a)),a.el||(a=w(a.text,a.action)),a)}function z(a,b,c){var d=b.el,e=b.action;return r(d,"click",function(){var a;e&&(a=e.call(c)),!1!==a&&c.remove()}),a.appendChild(d),a}function A(a){var b=F.dialogPolyfill,c=void 0===b?{}:b,d=c.registerDialog;return d?d(a):a}function B(a){return function(b){var c,d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:la,e=F.Promise;if(e){var f=new e(function(e){c=a(b,function(a){return e(a),d.call(this,a)})});return f.dialog=c,f}return a(b,d)}}function C(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:la;if(a=v(a),!a.actions){var c=ma(b);a.actions=[c]}a.onClose=b;var d=new oa(a);return pa(d.container,"fu-dialog--alert"),d}function D(a){function b(){return d.call(this,!0)}function c(){return d.call(this,!1)}var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:la;if(a=v(a),!a.actions){var e=ma(b),f=na(c);a.actions=ka.reverseActions?[f,e]:[e,f]}a.onClose=c;var g=new oa(a);return pa(g.container,"fu-dialog--confirm"),g}function E(a){function b(){return d.call(this,f.value)}function c(){return d.call(this)}var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:la;a=v(a,{title:null,closeButton:!1}),a.content||"message"in a||(a.content=[]);var e=a,f=e.input;if(f||(a.rows?f=k("textarea",{className:"fu-dialog__input",rows:a.rows,placeholder:a.placeholder||ka.promptPlaceholder}):f=k("input",{className:"fu-dialog__input",placeholder:a.placeholder||ka.promptPlaceholder})),!a.actions){var g=ma(b),h=na(c);a.actions=ka.reverseActions?[h,g]:[g,h]}a.onClose=c;var i=new oa(a,!1);return pa(i.container,"fu-dialog--prompt"),o(i.body,f),i.open(),i}var F={},G=Function("return this")(),H=Array.prototype.forEach,I=H||function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this)},J=Object.prototype.hasOwnProperty,K=Object.assign,L=K||function(a){for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return I.call(d,function(c){b.call(c,function(b,c){a[c]=b})}),a},M=G.document;if(!M)throw new Error("".concat("fu-dialog"," requires a window with a document."));var N="".concat("fu","-dialog"),O="".concat(N,"__head"),P="".concat(N,"__title"),Q="".concat(N,"__body"),R="".concat(N,"__message"),S="".concat(N,"__message-body"),T="".concat(N,"__input"),U="".concat(N,"__foot"),V="".concat(N,"__actions"),W="".concat(N,"__close"),X="".concat(N,"__action"),Y="".concat(X,"--confirm"),Z="".concat(X,"--cancel"),$="".concat(N,"--alert"),_="".concat(N,"--confirm"),aa="".concat(N,"--prompt"),ba=Object.prototype.toString,ca=Array.isArray,da=ca||function(a){return"Array"===g(a)},ea=M.createElement("div"),fa="classList"in ea,ga="textContent"in ea,ha={button:{type:"button"},input:{type:"text"}},ia=function(){return!1},ja=function(){return!0},ka={title:"\u63D0\u793A",confirmActionText:"\u786E\u5B9A",cancelActionText:"\u53D6\u6D88",promptPlaceholder:"\u8BF7\u8F93\u5165",reverseActions:!1,closeButton:"\u5173\u95ED",preventCancel:!0},la=function(){},ma=x("confirm"),na=x("cancel"),oa=function(){function a(b,d){c(this,a);var e=this;b=v(b);var f=null!==b.title&&!1!==b.title&&"undefined"!=typeof b.title,g=b.content,h="message"in b,i=(b.actions||[]).map(y),j=b,l=j.closeButton,m=void 0===l?"":l,n=j.onClose,p=b,q=p.preventCancel,s=p.onCancel,u=k("dialog",N);if(A(u),q?t(u,"cancel"):r(u,"cancel",function(){s&&s(),e.remove()}),this.container=u,m){var w=k(u,"button",{className:W,innerHTML:"<span>".concat(m+"","</span>")});r(w,"click",function(){n&&n(),e.remove()})}if(f){var x=k(u,"div",O);this.head=x;k(x,"div",{className:P,textContent:b.title+""})}if(g||h){var B=k(u,"div",Q);if(this.body=B,g)o(B,b.content);else if(h)var C=k(B,"div",R),D=k(C,"span",{className:S,textContent:b.message+""})}if(i.length){var E=k(u,"div",U);this.foot=E;var F=k(E,"div",V);I.call(i,function(a){return z(F,a,e)})}M.body.appendChild(this.container),!1!==d&&this.open()}return e(a,[{key:"open",value:function(){this.container.showModal()}},{key:"remove",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"close",value:function(){this.container.close()}}]),a}(),pa=fa?function(a,b){return a.classList.add(b),a}:function(a,b){return a.className+=" ".concat(b),a},qa=G.Promise,ra=G.dialogPolyfill;L(F,{Promise:qa,dialogPolyfill:ra});var sa=function(){function b(a){return new oa(a)}return L(b,{env:F,setEnvironment:a,defaults:ka,setDefaults:u,dialog:b,Dialog:oa,alert:B(C),confirm:B(D),prompt:B(E),action:L(w,{confirm:ma,cancel:na}),btn:{confirm:ma(),cancel:na()}}),b}();return sa});
