!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).fd=t()}(this,function(){"use strict";var n={};function t(t){var e=t.Promise,o=t.dialogPolyfill;e&&(n.Promise=e),o&&(n.dialogPolyfill=o)}var e=Function("return this")(),o=Array.prototype.forEach||function(n){for(var t=0,e=this.length;t<e;t+=1)n.call(this,this[t],t,this)},r=Object.prototype.hasOwnProperty;var i=Object.assign||function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return o.call(e,function(t){(function(n){var t;for(t in this)r.call(this,t)&&n.call(this,this[t],t,this)}).call(t,function(t,e){n[e]=t})}),n};function c(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var a=e.document;if(!a)throw new Error("".concat("fu-dialog"," requires a window with a document."));var l="".concat("fu","-dialog"),u=l,s="".concat(l,"__head"),f="".concat(l,"__title"),v="".concat(l,"__body"),d="".concat(l,"__message"),p="".concat(l,"__message-body"),h="".concat(l,"__input"),m="".concat(l,"__foot"),g="".concat(l,"__actions"),y="".concat(l,"__close"),b="".concat(l,"__action"),w="".concat(b,"--confirm"),C="".concat(b,"--cancel"),_="".concat(l,"--alert"),x="".concat(l,"--confirm"),P="".concat(l,"--prompt"),N=Object.prototype.toString;function A(n){return N.call(n).slice(8,-1)}var j=Array.isArray||function(n){return"Array"===A(n)},T=a.createElement("div"),k="classList"in T,E="textContent"in T;function O(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return j(n)?n:String(n||"").split(" ")}var S={button:{type:"button"},input:{type:"text"}};function L(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"string"==typeof n&&(e=t,t=n,n=null);var o=a.createElement(t);return e=function(n,t){var e=S[t];return e&&(n=i({},e,n)),n}(e=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(j(n)||"string"==typeof n)&&(n={className:n});var t=O(n.className);return 0!==t.length?n.className=t.join(" "):delete n.className,!E&&"textContent"in n&&(n.innerText=n.textContent,delete n.textContent),n}(e),t),i(o,e),n&&n.appendChild(o),o}var D=9007199254740991;function B(n){return n&&"function"!=typeof n&&function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=D}(n.length)}function M(n){return n&&"number"==typeof n.nodeType}function H(n,t){return"string"==typeof t?(n.innerHTML=t,n):M(t)?(n.appendChild(t),n):B(t)?(o.call(t,function(t){H(n,t)}),n):n}var q=function(){return!1},F=function(){return!0};function z(n,t,e){var o,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return("function"==typeof(o=t)||"boolean"==typeof o)&&(r=e||!1,e=t,t="click"),e=function(n){return!0===n&&(n=F),!1===n&&(n=q),n}(e),n.addEventListener(t,e,r),n}function G(n){return n.preventDefault(),!1}var I={title:"提示",confirmActionText:"确定",cancelActionText:"取消",promptPlaceholder:"请输入",reverseActions:!1,closeButton:"关闭",preventCancel:!0};function J(n,t){return 2===arguments.length&&(n=function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}({},n,t)),i(I,n)}function K(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;return"Object"!==A(n)&&(n={message:n}),n=i(t,n)}var Q=function(){};function R(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q;"function"==typeof t&&(e=t,t={}),!1===e&&(e=q),!0===e&&(e=F);var o=O((t=i({textContent:String(n)},t)).className);return o.unshift(b),t.className=o,{el:L("button",t),action:e}}function U(n){var t="";return"confirm"===n?t=w:"cancel"===n&&(t=C),function(e,o){var r=I["".concat(n,"ActionText")];return"function"==typeof e&&(o=e,e=r),R(e=e||r,{className:t},o)}}var V=U("confirm"),W=U("cancel");function X(n){return"string"==typeof n&&(n={text:n}),B(n)?X(n[0]):(M(n)&&(n={el:n}),"function"==typeof n.el&&(n.el=n.el()),n!==V&&n!==W||(n=n()),"function"!=typeof n&&"boolean"!=typeof n||(n=V(n)),n.el||(n=R(n.text,n.action)),n)}var Y=function(){function t(e,r){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=this,c=!(null===(e=K(e)).title||!1===e.title||void 0===e.title),l=e.content,h="message"in e,b=(e.actions||[]).map(X),w=e,C=w.closeButton,_=void 0===C?"":C,x=w.onClose,P=e,N=P.preventCancel,A=P.onCancel,j=L("dialog",u);(function(t){var e=n.dialogPolyfill,o=(void 0===e?{}:e).registerDialog;o&&o(t)}(j),N?z(j,"cancel",G):z(j,"cancel",function(){A&&A(),i.remove()}),this.container=j,_)&&z(L(j,"button",{className:y,innerHTML:"<span>".concat(String(_),"</span>")}),"click",function(){x&&x(),i.remove()});if(c){var T=L(j,"div",s);this.head=T;L(T,"div",{className:f,textContent:String(e.title)})}if(l||h){var k=L(j,"div",v);if(this.body=k,l)H(k,e.content);else if(h){var E=L(k,"div",d);L(E,"span",{className:p,textContent:String(e.message)})}}if(0!==b.length){var O=L(j,"div",m);this.foot=O;var S=L(O,"div",g);o.call(b,function(n){return function(n,t,e){var o=t.el,r=t.action;return z(o,"click",function(){var n;r&&(n=r.call(e)),!1!==n&&e.remove()}),n.appendChild(o),n}(S,n,i)})}a.body.appendChild(this.container),!1!==r&&this.open()}var e,r,i;return e=t,(r=[{key:"open",value:function(){this.container.showModal()}},{key:"remove",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"close",value:function(){this.container.close()}}])&&c(e.prototype,r),i&&c(e,i),t}();function Z(t){return function(e){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q,i=n.Promise;if(i){var c=new i(function(n){o=t(e,function(t){return n(t),r.call(this,t)})});return c.dialog=o,c}return t(e,r)}}var $=k?function(n,t){return n.classList.add(t),n}:function(n,t){return n.className+=" ".concat(t),n};function nn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;if(!(n=K(n)).actions){var e=V(t);n.actions=[e]}n.onClose=t;var o=new Y(n);return $(o.container,_),o}function tn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;function e(){return t.call(this,!1)}if(!(n=K(n)).actions){var o=V(function(){return t.call(this,!0)}),r=W(e);I.reverseActions?n.actions=[r,o]:n.actions=[o,r]}n.onClose=e;var i=new Y(n);return $(i.container,x),i}function en(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;(n=K(n,{title:null,closeButton:!1})).content||"message"in n||(n.content=[]);var e=n.input;function o(){return t.call(this)}if(e||(e=n.rows?L("textarea",{className:h,rows:n.rows,placeholder:n.placeholder||I.promptPlaceholder}):L("input",{className:h,placeholder:n.placeholder||I.promptPlaceholder})),!n.actions){var r=V(function(){return t.call(this,e.value)}),i=W(o);I.reverseActions?n.actions=[i,r]:n.actions=[r,i]}n.onClose=o;var c=new Y(n,!1);return $(c.container,P),H(c.body,e),c.open(),c}var on=e.Promise,rn=e.dialogPolyfill;return i(n,{Promise:on,dialogPolyfill:rn}),function(){function e(n){return new Y(n)}return i(e,{env:n,setEnvironment:t,defaults:I,setDefaults:J,dialog:e,Dialog:Y,alert:Z(nn),confirm:Z(tn),prompt:Z(en),action:i(R,{confirm:V,cancel:W}),btn:{confirm:V(),cancel:W()}}),e}()});
