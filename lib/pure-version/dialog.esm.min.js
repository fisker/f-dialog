/*! fu-dialog v1.0.5 | (c) 2019 fisker | MIT */var env={},globalThis=Function("return this")(),forEach=Array.prototype.forEach,forEach$1=forEach||function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this)},hasOwnProperty=Object.prototype.hasOwnProperty;function forIn(a){for(var b in this)hasOwnProperty.call(this,b)&&a.call(this,this[b],b,this)}var assign=Object.assign,assign$1=assign||function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return forEach$1.call(c,function(b){forIn.call(b,function(b,c){a[c]=b})}),a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var name="fu-dialog",document=globalThis.document;if(!document)throw new Error("".concat("fu-dialog"," requires a window with a document."));var NS="fu-dialog",CONTAINER="fu-dialog",HEAD="".concat("fu-dialog","__head"),TITLE="".concat("fu-dialog","__title"),BODY="".concat("fu-dialog","__body"),MESSAGE="".concat("fu-dialog","__message"),MESSAGE_BODY="".concat("fu-dialog","__message-body"),INPUT="".concat("fu-dialog","__input"),FOOT="".concat("fu-dialog","__foot"),ACTIONS="".concat("fu-dialog","__actions"),CLOSE_BTN="".concat("fu-dialog","__close"),ACTION="".concat("fu-dialog","__action"),ACTION_TYPE_CONFIRM="".concat(ACTION,"--confirm"),ACTION_TYPE_CANCEL="".concat(ACTION,"--cancel"),DIALOG_TYPE_ALERT="".concat("fu-dialog","--alert"),DIALOG_TYPE_CONFIRM="".concat("fu-dialog","--confirm"),DIALOG_TYPE_PROMPT="".concat("fu-dialog","--prompt"),toString=Object.prototype.toString;function getType(a){return toString.call(a).slice(8,-1)}var isArray=Array.isArray,isArray$1=isArray||function(a){return"Array"===getType(a)},div=document.createElement("div"),SUPPORTS_CLASS_LIST="classList"in div,SUPPORTS_TEXT_CONTENT="textContent"in div;function parseClassNames(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b="";return b=isArray$1(a)?a:((a||"")+"").split(" "),b}function parseDomProps(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(isArray$1(a)||"string"==typeof a)&&(a={className:a});var b=parseClassNames(a.className);return b.length?a.className=b.join(" "):delete a.className,!SUPPORTS_TEXT_CONTENT&&"textContent"in a&&(a.innerText=a.textContent,delete a.textContent),a}var defaultDomProps={button:{type:"button"},input:{type:"text"}};function setDefaultProps(a,b){var c=defaultDomProps[b];return c&&(a=assign$1({},c,a)),a}function createElement(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};"string"==typeof a&&(c=b,b=a,a=null);var d=document.createElement(b);return c=parseDomProps(c),c=setDefaultProps(c,b),assign$1(d,c),a&&a.appendChild(d),d}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return"number"==typeof a&&-1<a&&0==a%1&&a<=MAX_SAFE_INTEGER}function isArrayLike(a){return a&&"function"!=typeof a&&isLength(a.length)}function isNode(a){return a&&"number"==typeof a.nodeType}function appendElement(a,b){return"string"==typeof b?(a.innerHTML=b,a):isNode(b)?(a.appendChild(b),a):isArrayLike(b)?(forEach$1.call(b,function(b){appendElement(a,b)}),a):a}var returnFalse=function(){return!1},returnTrue=function(){return!0};function isListener(a){return"function"==typeof a||"boolean"==typeof a}function parseListener(a){return!0===a&&(a=returnTrue),!1===a&&(a=returnFalse),a}function addListener(a,b,c){var d=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];return isListener(b)&&(d=c||!1,c=b,b="click"),c=parseListener(c),a.addEventListener(b,c,d),a}function preventDefault(a){return a.preventDefault(),!1}function preventEvent(a,b){return addListener(a,b,preventDefault)}var defaultSettings={title:"\u63D0\u793A",confirmActionText:"\u786E\u5B9A",cancelActionText:"\u53D6\u6D88",promptPlaceholder:"\u8BF7\u8F93\u5165",reverseActions:!1,closeButton:"\u5173\u95ED",preventCancel:!0};function parseOptions(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:defaultSettings,c=getType(a);return"Object"!==c&&(a={message:a}),a=assign$1(b,a),a}var noop=function(){};function createAction(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:noop;"function"==typeof b&&(c=b,b={}),!1===c&&(c=returnFalse),!0===c&&(c=returnTrue),b=assign$1({textContent:a+""},b);var d=parseClassNames(b.className);d.unshift(ACTION),b.className=d;var e=createElement("button",b);return{el:e,action:c}}function createTypedAction(a){var b="";return"confirm"===a?b=ACTION_TYPE_CONFIRM:"cancel"==a&&(b=ACTION_TYPE_CANCEL),function(c,d){var e=defaultSettings["".concat(a,"ActionText")];return"function"==typeof c&&(d=c,c=e),c=c||e,createAction(c,{className:b},d)}}var createConfirmAction=createTypedAction("confirm"),createCancelAction=createTypedAction("cancel");function parseAction(a){return("string"==typeof a&&(a={text:a}),isArrayLike(a))?parseAction(a[0]):(isNode(a)&&(a={el:a}),"function"==typeof a.el&&(a.el=a.el()),("function"==typeof a||"boolean"==typeof a)&&(a=createConfirmAction(a)),a.el||(a=createAction(a.text,a.action)),a)}function renderAction(a,b,c){var d=b.el,e=b.action;return addListener(d,"click",function(){var a;e&&(a=e.call(c)),!1!==a&&c.remove()}),a.appendChild(d),a}function registerDialog(a){var b=env.dialogPolyfill,c=void 0===b?{}:b,d=c.registerDialog;return d?d(a):a}var Dialog=function(){function a(b,c){_classCallCheck(this,a);var d=this;b=parseOptions(b);var e=null!==b.title&&!1!==b.title&&"undefined"!=typeof b.title,f=b.content,g="message"in b,h=(b.actions||[]).map(parseAction),i=b,j=i.closeButton,k=void 0===j?"":j,l=i.onClose,m=b,n=m.preventCancel,o=m.onCancel,p=createElement("dialog",CONTAINER);if(registerDialog(p),n?preventEvent(p,"cancel"):addListener(p,"cancel",function(){o&&o(),d.remove()}),this.container=p,k){var q=createElement(p,"button",{className:CLOSE_BTN,innerHTML:"<span>".concat(k+"","</span>")});addListener(q,"click",function(){l&&l(),d.remove()})}if(e){var r=createElement(p,"div",HEAD);this.head=r;createElement(r,"div",{className:TITLE,textContent:b.title+""})}if(f||g){var s=createElement(p,"div",BODY);if(this.body=s,f)appendElement(s,b.content);else if(g)var t=createElement(s,"div",MESSAGE),u=createElement(t,"span",{className:MESSAGE_BODY,textContent:b.message+""})}if(h.length){var v=createElement(p,"div",FOOT);this.foot=v;var w=createElement(v,"div",ACTIONS);forEach$1.call(h,function(a){return renderAction(w,a,d)})}document.body.appendChild(this.container),!1!==c&&this.open()}return _createClass(a,[{key:"open",value:function(){this.container.showModal()}},{key:"remove",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"close",value:function(){this.container.close()}}]),a}();function returnPromise(a){var b=env.Promise;return function(c){var d,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:noop,f=new b(function(b){d=a(c,function(a){return b(a),e.call(this,a)})});return f.dialog=d,f}}var identify=function(a){return a};function setDefault(a,b){return 2===arguments.length&&(a=_defineProperty({},a,b)),assign$1(defaultSettings,a)}function addClassByClassList(a,b){return a.classList.add(b),a}function addClassByClassName(a,b){return a.className+=" ".concat(b),a}var addClass=SUPPORTS_CLASS_LIST?addClassByClassList:addClassByClassName;function alert(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:noop;if(a=parseOptions(a),!a.actions){var c=createConfirmAction(b);a.actions=[c]}a.onClose=b;var d=new Dialog(a);return addClass(d.container,DIALOG_TYPE_ALERT),d}function confirm(a){function b(){return d.call(this,!0)}function c(){return d.call(this,!1)}var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:noop;if(a=parseOptions(a),!a.actions){var e=createConfirmAction(b),f=createCancelAction(c);a.actions=defaultSettings.reverseActions?[f,e]:[e,f]}a.onClose=c;var g=new Dialog(a);return addClass(g.container,DIALOG_TYPE_CONFIRM),g}function prompt(a){function b(){return d.call(this,f.value)}function c(){return d.call(this)}var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:noop;a=parseOptions(a,{title:null,closeButton:!1}),a.content||"message"in a||(a.content=[]);var e=a,f=e.input;if(f||(a.rows?f=createElement("textarea",{className:INPUT,rows:a.rows,placeholder:a.placeholder||defaultSettings.promptPlaceholder}):f=createElement("input",{className:INPUT,placeholder:a.placeholder||defaultSettings.promptPlaceholder})),!a.actions){var g=createConfirmAction(b),h=createCancelAction(c);a.actions=defaultSettings.reverseActions?[h,g]:[g,h]}a.onClose=c;var i=new Dialog(a,!1);return addClass(i.container,DIALOG_TYPE_PROMPT),appendElement(i.body,f),i.open(),i}function exportModule(){function a(a){return new Dialog(a)}var b=env.Promise?returnPromise:identify;return assign$1(a,{defaultSettings:defaultSettings,setDefault:setDefault,dialog:a,Dialog:Dialog,alert:b(alert),confirm:b(confirm),prompt:b(prompt),action:assign$1(createAction,{confirm:createConfirmAction,cancel:createCancelAction}),btn:{confirm:createConfirmAction(),cancel:createCancelAction()}}),a}var Promise$1=globalThis.Promise,dialogPolyfill=globalThis.dialogPolyfill;assign$1(env,{Promise:Promise$1,dialogPolyfill:dialogPolyfill});var pureVersion=exportModule();export default pureVersion;
//# sourceMappingURL=dialog.esm.min.js.map
