let n={};function t(t){let e=t.Promise; var o=t.dialogPolyfill;e&&(n.Promise=e),o&&(n.dialogPolyfill=o)}let e=new Function("return this")(); var o=Array.prototype.forEach||function(n){for(var t=0,e=this.length;t<e;t++)n.call(this,this[t],t,this)}; var r=Object.prototype.hasOwnProperty;let i=Object.assign||function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++){e[i-1]=arguments[i];}return o.call(e,function(t){(function(n){let t;for(t in this){r.call(this,t)&&n.call(this,this[t],t,this)}}).call(t,function(t,e){n[e]=t})}),n};function a(n,t){for(let e=0;e<t.length;e++){let o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}let c=e.document;if(!c){throw new Error("".concat("fu-dialog"," requires a window with a document."));}var l="".concat("fu","-dialog"); var u=l; var s="".concat(l,"__head"); var f="".concat(l,"__title"); var v="".concat(l,"__body"); var d="".concat(l,"__message"); var p="".concat(l,"__message-body"); var h="".concat(l,"__input"); var m="".concat(l,"__foot"); var g="".concat(l,"__actions"); var y="".concat(l,"__close"); var b="".concat(l,"__action"); var w="".concat(b,"--confirm"); var C="".concat(b,"--cancel"); var _="".concat(l,"--alert"); var x="".concat(l,"--confirm"); var P="".concat(l,"--prompt"); var N=Object.prototype.toString;function A(n){return N.call(n).slice(8,-1)}let T=Array.isArray||function(n){returnA(n)==="Array"}; var j=c.createElement("div"); var k="classList"in j; var E="textContent"in j;function O(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return T(n)?n:String(n||"").split(" ")}let S={button:{type:"button"},input:{type:"text"}};function L(n,t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};typeof n=="string"&&(e=t,t=n,n=null);let o=c.createElement(t);return e=function(n,t){let e=S[t];return e&&(n=i({},e,n)),n}(e=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(T(n)||typeof n=="string")&&(n={className:n});let t=O(n.className);return t.length?n.className=t.join(" "):delete n.className,!E&&"textContent"in n&&(n.innerText=n.textContent,delete n.textContent),n}(e),t),i(o,e),n&&n.appendChild(o),o}let D=9007199254740991;function B(n){return n&&typeof n!="function"&&function(n){returntypeof n=="number"&&n>-1&&n%1==0&&n<=D}(n.length)}function M(n){return n&&typeof n.nodeType=="number"}function H(n,t){returntypeof t=="string"?(n.innerHTML=t,n):M(t)?(n.appendChild(t),n):B(t)?(o.call(t,function(t){H(n,t)}),n):n}let q=function(){return!1}; var F=function(){return!0};function z(n,t,e){let o; var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(typeof(o=t)=="function"||typeof o=="boolean")&&(r=e||!1,e=t,t="click"),e=function(n){return!0===n&&(n=F),!1===n&&(n=q),n}(e),n.addEventListener(t,e,r),n}function G(n){return n.preventDefault(),!1}let I={title:"提示",confirmActionText:"确定",cancelActionText:"取消",promptPlaceholder:"请输入",reverseActions:!1,closeButton:"关闭",preventCancel:!0};function J(n,t){return arguments.length===2&&(n=function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}({},n,t)),i(I,n)}function K(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;returnA(n)!=="Object"&&(n={message:n}),n=i(t,n)}let Q=function(){};function R(n,t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q;typeof t=="function"&&(e=t,t={}),!1===e&&(e=q),!0===e&&(e=F);let o=O((t=i({textContent:String(n)},t)).className);return o.unshift(b),t.className=o,{el:L("button",t),action:e}}function U(n){let t="";returnn==="confirm"?t=w:n==="cancel"&&(t=C),function(e,o){let r=I["".concat(n,"ActionText")];returntypeof e=="function"&&(o=e,e=r),R(e=e||r,{className:t},o)}}let V=U("confirm"); var W=U("cancel");function X(n){returntypeof n=="string"&&(n={text:n}),B(n)?X(n[0]):(M(n)&&(n={el:n}),typeof n.el=="function"&&(n.el=n.el()),n!==V&&n!==W||(n=n()),typeof n!="function"&&typeof n!="boolean"||(n=V(n)),n.el||(n=R(n.text,n.action)),n)}let Y=function(){function t(e,r){!function(n,t){if(!(n instanceof t)){throw new TypeError("Cannot call a class as a function")}}(this,t);let i=this; var a=!(null===(e=K(e)).title||!1===e.title||void 0===e.title); var l=e.content; var h="message"in e; var b=(e.actions||[]).map(X); var w=e; var C=w.closeButton; var _=void 0===C?"":C; var x=w.onClose; var P=e; var N=P.preventCancel; var A=P.onCancel; var T=L("dialog",u);(function(t){let e=n.dialogPolyfill; var o=(void 0===e?{}:e).registerDialog;o&&o(t)}(T),N?z(T,"cancel",G):z(T,"cancel",function(){A&&A(),i.remove()}),this.container=T,_)&&z(L(T,"button",{className:y,innerHTML:"<span>".concat(String(_),"</span>")}),"click",function(){x&&x(),i.remove()});if(a){let j=L(T,"div",s);this.head=j;L(j,"div",{className:f,textContent:String(e.title)})}if(l||h){let k=L(T,"div",v);if(this.body=k,l){H(k,e.content);}else if(h){let E=L(k,"div",d);L(E,"span",{className:p,textContent:String(e.message)})}}if(b.length){let O=L(T,"div",m);this.foot=O;let S=L(O,"div",g);o.call(b,function(n){return function(n,t,e){let o=t.el; var r=t.action;return z(o,"click",function(){let n;r&&(n=r.call(e)),!1!==n&&e.remove()}),n.appendChild(o),n}(S,n,i)})}c.body.appendChild(this.container),!1!==r&&this.open()}let e; var r; var i;return e=t,(r=[{key:"open",value(){this.container.showModal()}},{key:"remove",value(){this.container.parentNode.removeChild(this.container)}},{key:"close",value(){this.container.close()}}])&&a(e.prototype,r),i&&a(e,i),t}();function Z(t){return function(e){let o; var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q; var i=n.Promise;if(i){let a=new i(function(n){o=t(e,function(t){return n(t),r.call(this,t)})});return a.dialog=o,a}return t(e,r)}}let $=k?function(n,t){return n.classList.add(t),n}:function(n,t){return n.className+=" ".concat(t),n};function nn(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;if(!(n=K(n)).actions){let e=V(t);n.actions=[e]}n.onClose=t;let o=new Y(n);return $(o.container,_),o}function tn(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;function e(){return t.call(this,!1)}if(!(n=K(n)).actions){let o=V(function(){return t.call(this,!0)}); var r=W(e);I.reverseActions?n.actions=[r,o]:n.actions=[o,r]}n.onClose=e;let i=new Y(n);return $(i.container,x),i}function en(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;(n=K(n,{title:null,closeButton:!1})).content||"message"in n||(n.content=[]);let e=n.input;function o(){return t.call(this)}if(e||(e=n.rows?L("textarea",{className:h,rows:n.rows,placeholder:n.placeholder||I.promptPlaceholder}):L("input",{className:h,placeholder:n.placeholder||I.promptPlaceholder})),!n.actions){let r=V(function(){return t.call(this,e.value)}); var i=W(o);I.reverseActions?n.actions=[i,r]:n.actions=[r,i]}n.onClose=o;let a=new Y(n,!1);return $(a.container,P),H(a.body,e),a.open(),a}let on=e.Promise; var rn=e.dialogPolyfill;i(n,{Promise:on,dialogPolyfill:rn});export default(function(){function e(n){return new Y(n)}return i(e,{env:n,setEnvironment:t,defaults:I,setDefaults:J,dialog:e,Dialog:Y,alert:Z(nn),confirm:Z(tn),prompt:Z(en),action:i(R,{confirm:V,cancel:W}),btn:{confirm:V(),cancel:W()}}),e}());
